% Arora konyv peldaja, egy rugókból álló rendszerrel kapcsolatos
function ret=myspring()
  % név
  ret.fname="spring system" ;

  numvar=2 ;
  ret.numvar=numvar ;


  f = @(x,y) 100*(sqrt(x.^2+ (y.^2+1).^2)-1).^2 +...
      90*(sqrt(x.^2+ (y.^2-1).^2)-1).^2-20*x-40*y ;

  fV = @(v) f(v(1),v(2)) ;

  % ezt kellene kiszamolni (feladat)
  dfx = @(x,y) (180*x*(((y^2 - 1)^2 + x^2)^(1/2) - 1))/((y^2 - 1)^2 + x^2)^(1/2) + (200*x*(((y^2 + 1)^2 + x^2)^(1/2) - 1))/((y^2 + 1)^2 + x^2)^(1/2) - 20 ;
  dfy = @(x,y) (360*y*(y^2 - 1)*(((y^2 - 1)^2 + x^2)^(1/2) - 1))/((y^2 - 1)^2 + x^2)^(1/2) + (400*y*(y^2 + 1)*(((y^2 + 1)^2 + x^2)^(1/2) - 1))/((y^2 + 1)^2 + x^2)^(1/2) - 40 ;
  dfV =@(v) [dfx(v(1),v(2)) ; dfy(v(1),v(2))] ;
  dfxx = @(x,y)(sqrt((y.^2-1.0).^2+x.^2)-1.0).*1.0./sqrt((y.^2-1.0).^2+x.^2).*1.8e2+(sqrt((y.^2+1.0).^2+x.^2)-1.0).*1.0./sqrt((y.^2+1.0).^2+x.^2).*2.0e2+(x.^2.*1.8e2)./((y.^2-1.0).^2+x.^2)+(x.^2.*2.0e2)./((y.^2+1.0).^2+x.^2)-x.^2.*(sqrt((y.^2-1.0).^2+x.^2)-1.0).*1.0./((y.^2-1.0).^2+x.^2).^(3.0./2.0).*1.8e2-x.^2.*(sqrt((y.^2+1.0).^2+x.^2)-1.0).*1.0./((y.^2+1.0).^2+x.^2).^(3.0./2.0).*2.0e2 ;
  dfxy = @(x,y)(x.*y.*(y.^2-1.0).*3.6e2)./((y.^2-1.0).^2+x.^2)+(x.*y.*(y.^2+1.0).*4.0e2)./((y.^2+1.0).^2+x.^2)-x.*y.*(y.^2-1.0).*(sqrt((y.^2-1.0).^2+x.^2)-1.0).*1.0./((y.^2-1.0).^2+x.^2).^(3.0./2.0).*3.6e2-x.*y.*(y.^2+1.0).*(sqrt((y.^2+1.0).^2+x.^2)-1.0).*1.0./((y.^2+1.0).^2+x.^2).^(3.0./2.0).*4.0e2 ;
  dfyy = @(x,y)(y.^2-1.0).*(sqrt((y.^2-1.0).^2+x.^2)-1.0).*1.0./sqrt((y.^2-1.0).^2+x.^2).*3.6e2+(y.^2+1.0).*(sqrt((y.^2+1.0).^2+x.^2)-1.0).*1.0./sqrt((y.^2+1.0).^2+x.^2).*4.0e2+y.^2.*(sqrt((y.^2-1.0).^2+x.^2)-1.0).*1.0./sqrt((y.^2-1.0).^2+x.^2).*7.2e2+y.^2.*(sqrt((y.^2+1.0).^2+x.^2)-1.0).*1.0./sqrt((y.^2+1.0).^2+x.^2).*8.0e2+(y.^2.*(y.^2-1.0).^2.*7.2e2)./((y.^2-1.0).^2+x.^2)+(y.^2.*(y.^2+1.0).^2.*8.0e2)./((y.^2+1.0).^2+x.^2)-y.^2.*(y.^2-1.0).^2.*(sqrt((y.^2-1.0).^2+x.^2)-1.0).*1.0./((y.^2-1.0).^2+x.^2).^(3.0./2.0).*7.2e2-y.^2.*(y.^2+1.0).^2.*(sqrt((y.^2+1.0).^2+x.^2)-1.0).*1.0./((y.^2+1.0).^2+x.^2).^(3.0./2.0).*8.0e2;
  d2fV = @(v) [ dfxx(v(1),v(2)) dfxy(v(1),v(2)) ; dfxy(v(1),v(2)) dfyy(v(1),v(2))] ;
  

  ret.f=f ;
  ret.fV=fV ;
%   ret.dfx=dfx ; % ezeket nem nagyon hasznaljuk kulon
%   ret.dfy=dfy ;
  ret.dfV=dfV ;
  ret.d2fV=d2fV ;
  
  
  
  % a tartomany
  xmin = -2 ; 
  xmax = 2 ;
  xb = linspace(xmin,xmax,30) ;
  ymin = -2 ; 
  ymax = 2 ;
  yb = linspace(ymin,ymax,30) ;

  ret.xmin = xmin ; 
  ret.xmax = xmax ;
  ret.xb = xb ;
  ret.ymin = ymin ; 
  ret.ymax = ymax ;
  ret.yb=yb ;
  
end